---
# defaults file for ansible-role-lustre-build

# Lustre version to clone and build
lustre_version: "master"  # Or a specific tag like "b2_15" or "2.15.4"

# Base path for storing lustre source code (ensure this path is writable by the Ansible user if not using become)
lustre_src_path: "/usr/local/src/lustre"

# Base path for storing compiled RPMs (ensure this path is writable by the Ansible user if not using become)
lustre_rpm_path: "/opt/lustre_rpms"

# --- RPM Signing Variables ---
# Whether to sign the RPMs
lustre_sign_rpms: false

# GPG Key information for signing RPMs
# This is the name/email of the GPG key to use for signing.
# Example: "Your Name <your.email@example.com>" or a GPG Key ID.
lustre_gpg_key_name: ""

# Whether to attempt to generate a GPG key if the specified key_name is not found.
# WARNING: Automated GPG key generation is complex and has security implications.
# It's generally recommended to manage GPG keys outside the role for production.
# This option is provided for convenience in development/testing environments.
lustre_generate_gpg_key_if_missing: false
lustre_gpg_key_type: "RSA"         # GPG Key Type (e.g., RSA, DSA, ECC)
lustre_gpg_key_length: "2048"      # GPG Key Length
lustre_gpg_key_expire_date: "0"    # GPG Key Expire Date (0 for no expiration)
lustre_gpg_real_name: "Lustre Build Key" # Real name for GPG key if generated
lustre_gpg_comment: "Auto-generated by Ansible for Lustre RPM signing" # Comment for GPG key if generated
lustre_gpg_email: "lustrebuilder@localhost" # Email for GPG key if generated

# GPG Passphrase for signing.
# Option 1: Set directly (less secure, visible in logs/variables).
# lustre_gpg_passphrase: "your_passphrase_here"
# Option 2: Path to a file containing the passphrase (more secure).
# The role will read the passphrase from this file. Ensure it's protected.
lustre_gpg_passphrase_file: "" # e.g., "/path/to/secure/gpg_passphrase.txt"
                               # If this is empty, and no direct passphrase, assumes key is passphrase-less or gpg-agent handles it.

# Path to the GPG home directory. Defaults to ~/.gnupg of the user running the task.
# Can be overridden if GPG keys are stored in a custom location.
lustre_gpg_home: "" # e.g., "/var/lib/rpm-gpg" or "{{ ansible_env.HOME }}/.gnupg"

# Temporary file to hold the GPG passphrase during signing.
# This file will be created with strict permissions and deleted after use.
# It's generally best to let the role manage this in a secure temp location.
# You can override if needed, but be cautious.
_lustre_tmp_passphrase_path: "" # Internal use, will default to a temp file
